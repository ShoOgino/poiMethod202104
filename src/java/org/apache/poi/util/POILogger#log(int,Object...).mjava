   /**
     * Log a message. Lazily appends Object parameters together.
     * If the last parameter is a {@link Throwable} it is logged specially.
     *
     * @param level One of DEBUG, INFO, WARN, ERROR, FATAL
     * @param objs the objects to place in the message
     */
    default void log(int level, Object... objs) {
        if (!check(level)) return;
        Throwable lastEx = null;
        String msg;
        if (objs.length == 0) {
            msg = "";
        } else if (objs.length == 1) {
            if (objs[0] instanceof Throwable) {
                lastEx = (Throwable)objs[0];
            }
            msg = objs[0].toString();
        } else {
            StringBuilder sb = new StringBuilder(32);
            for (int i=0; i<objs.length; i++) {
                if (i == objs.length-1 && objs[i] instanceof Throwable) {
                    lastEx = (Throwable)objs[i];
                } else {
                    sb.append(objs[i]);
                }
            }
            msg = sb.toString();
        }
        // log forging escape
        msg = msg.replaceAll("[\r\n]+", " ");

        if (lastEx == null) {
            _log(level, msg);
        } else {
            _log(level, msg, lastEx);
        }
    }

